!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0),n(1);var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},o=/[&<>"'/]/g,s={noClosingTag:["img","input","br","embed","source","link","meta","area","command","base","col","param","wbr","hr","keygen"],ignoredKeys:["b","e","m","c","t","cl","class"],isPlainObj:function(e){return"[object Object]"===Object.prototype.toString.call(e)},build:function(e){if(null===e||void 0===e)return"";var t=[];if(this.isPlainObj(e))return this.tag(e);if(Array.isArray(e)){for(var n=0,i=e.length;n<i;n++)t.push(this.build(e[n]));return t.join("")}return""+e},tag:function(e){var t=e.t||"div",n="<"+t+this.attrs(e);return-1!==this.noClosingTag.indexOf(t)?n+"/>":(n+=">",e.c&&(n+=this.build(e.c)),n+="</"+t+">")},attrs:function(e){var t,n,i=e.b,o=e.e,s=e.m,r=[],a=[];if(i||o){if(i=i||this._currentBlock,o?r.push(this.elem(i,o)):r.push(this.block(i)),this.isPlainObj(s)){for(n in s)s.hasOwnProperty(n)&&r.push(this.elem(i,o,n,s[n]));r.sort();for(var l=0,c=r.length;l<c;l++)r[l]!==r[l-1]&&a.push(r[l])}else a=r;t=this.attr("class",a),this._currentBlock=i}else t=(a=e.cl||e.class)?this.attr("class",a):"";for(n in e)e.hasOwnProperty(n)&&-1===this.ignoredKeys.indexOf(n)&&(t+=this.attr(n,e[n]));return t},attr:function(e,t){return void 0===t||null===t||!1===t?"":" "+e+'="'+(Array.isArray(t)?t.join(" "):""+t).replace(o,function(e){return i[e]})+'"'},block:function(e,t,n){return e+this.mod(t,n)},elem:function(e,t,n,i){return e+(t?"__"+t:"")+this.mod(n,i)},mod:function(e,t){return!1===t||null===t||void 0===t?"":"_"+e+(""===t||!0===t?"":"_"+t)},reset:function(){return this._currentBlock="",this}};function r(e){return s.reset().build(e)}var a=function(e,t){return"string"==typeof t&&(t=document.querySelector(t)),"string"==typeof e?(t||document).querySelector(e):e};function l(e,t){var n=a(e,t);return n||console.error("Can't find DOM element \""+e+'"',t),n}function c(e,t){return"string"==typeof e?(t||document).querySelectorAll(e):e}l.js2dom=function(e){var t=document.createElement("div");return t.innerHTML=r(e),t.firstChild},l.on=function(e,t,n){return l(e).addEventListener(t,n,!1),l},l.delegate=function(e,t,n,i){return l(e).addEventListener(n,function(n){for(var o=n.target;o!==e;o=o.parentNode||e){var s="."===t[0]?t.substr(1):t;o.classList.contains(s)&&i.call(o,n)}},!1),l},l.off=function(e,t,n){return l(e).removeEventListener(t,n,!1),l},l.move=function(e,t,n){l.css(e,{left:t+"px",top:n+"px"})},l.size=function(e,t,n){l.css(e,{width:t+"px",height:n+"px"})},l.css=function(e,t){var n=e.style;Object.keys(t).forEach(function(e){n[e]=t[e]})},l.show=function(e){l(e).style.display="block"},l.hide=function(e){l(e).style.display="none"},l.offset=function(e){var t={top:0,left:0};return e&&void 0!==e.getBoundingClientRect&&(t=e.getBoundingClientRect()),{top:t.top+(window.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}};var u,h,f,d=(u=document.createElement("div"),h="Khtml ms O Moz Webkit".split(" "),f=h.length,function(e){if(e in u.style)return!0;for(e=e.replace(/^[a-z]/,function(e){return e.toUpperCase()});f--;)if(h[f]+e in u.style)return!0;return!1});function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){return this._eventBuffer||(this._eventBuffer=[]),e&&t&&this._eventBuffer.push({type:e,callback:t}),this}},{key:"off",value:function(e,t){for(var n=this._eventBuffer||[],i=0;i<n.length;i++)t===n[i].callback&&e===n[i].type&&(n.splice(i,1),i--);return this}},{key:"trigger",value:function(e,t){for(var n=this._eventBuffer||[],i=0;i<n.length;i++)e===n[i].type&&n[i].callback.call(this,{type:e},t);return this}}])&&m(t.prototype,n),i&&m(t,i),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?w(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=g(this,b(t).call(this)))._pressedBuffer={},e._pads=[],e.buttonName={"54c-5c4-Wireless Controller":{green:1,a:1,red:2,b:2,yellow:3,y:3,blue:0,x:0,left:16,right:17,up:14,down:15,back:8,start:9,lt:6,lb:4,rt:7,rb:5},xbox:{green:0,a:0,red:1,b:1,yellow:3,v:3,blue:2,x:2,left:14,right:15,up:12,down:13,back:8,start:9,lt:6,lb:4,rt:7,rb:5}},e.supported()?(l.on(window,"gamepadconnected",function(){e.search(),e.trigger("connected"),e._rafId||(e._rafId=window.requestAnimationFrame(e.checkButtons.bind(w(e))))}).on(window,"gamepaddisconnected",function(){e.search(),e.trigger("disconnected"),!e.get().length&&e._rafId&&(window.cancelAnimationFrame(e._rafId),e._rafId=null)}),e):g(e)}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,v),n=t,(i=[{key:"checkButtons",value:function(){for(var e=this,t=this.get(),n=function(n){var i=t[n];if(!i)return"continue";var o=i.index;e._pressedBuffer[o]=e._pressedBuffer[o]||{},i.buttons.forEach(function(e,t){"object"===p(e)&&(this._pressedBuffer[o][t]&&!e.pressed&&(this.trigger(this.getButtonEventName(t)),this.trigger(this.getButtonEventName(t,i.index)),console.log("name",this.getButtonEventName(t))),this._pressedBuffer[o][t]=e.pressed)},e)},i=0;i<t.length;i++)n(i);this._rafId=window.requestAnimationFrame(this.checkButtons.bind(this))}},{key:"supported",value:function(){return"function"==typeof navigator.getGamepads}},{key:"get",value:function(){return this._pads}},{key:"item",value:function(e){return this.get()[e]}},{key:"count",value:function(){return this.get().length}},{key:"search",value:function(){this._pads=this.supported()?navigator.getGamepads():[]}},{key:"getButtonId",value:function(e,t){var n=this._pads[t]&&this._pads[t].id;return console.log(this._pads[t],this.buttonName[n],n),this.buttonName[n]&&this.buttonName[n][e]}},{key:"getButtonEventName",value:function(e,t){return"gamepad:button-"+e+":index-"+(void 0===t?"*":t)}},{key:"onbutton",value:function(e,t){var n,i,o,s=this;return"string"==typeof e&&void 0!==(n=e.split(":")[1])&&(n=+n),console.log("bbbb",e,s.getButtonId(e,n)),o="number"==typeof(i=e)?i:s.getButtonId(i,n),s.on(s.getButtonEventName(o,n),t),this}},{key:"onbuttons",value:function(e,t){return e.forEach(function(e){this.onbutton(e,t)},this),this}}])&&y(n.prototype,i),o&&y(n,o),t}());function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.build(),this.setEvents(),this.timeout=3e3}var t,n,i;return t=e,(n=[{key:"build",value:function(){this._elemConnected=l.js2dom({cl:"gamepad-notice-connected",c:["âœ” ðŸŽ®",{cl:"gamepad-notice-connected__num"}]}),this._elemDisconnected=l.js2dom({cl:"gamepad-notice-disconnected",c:["âœ– ðŸŽ®",{cl:"gamepad-notice-disconnected__num"}]})}},{key:"setEvents",value:function(){k.on("connected",this.showConnected.bind(this)).on("disconnected",this.showDisconnected.bind(this)),document.body.appendChild(this._elemConnected),document.body.appendChild(this._elemDisconnected)}},{key:"showDisconnected",value:function(){var e=this,t="gamepad-notice-disconnected_show",n=this._elemDisconnected;n.classList.add(t),this._disTimer&&(clearTimeout(this._disTimer),this._disTimer=null),this._disTimer=setTimeout(function(){n.classList.remove(t),e._disTimer=null},this.timeout)}},{key:"showConnected",value:function(){var e=this,t="gamepad-notice-connected_show",n=this._elemConnected;n.classList.add(t),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(function(){n.classList.remove(t),e._timer=null},this.timeout)}}])&&C(t.prototype,n),i&&C(t,i),e}());var x,S=navigator.userAgent||navigator.vendor||window.opera,O=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(S)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(S.substr(0,4)),L=document.body;function E(e){e!==x&&(document.body.classList.remove("input_"+x),document.body.classList.add("input_"+e),x=e)}L.classList.add("support_transform3d_"+d("perspective")),L.classList.add("device_"+(O?"mobile":"desktop")),E("mouse"),O?E("touch"):l.on(document,"mousemove",function(){E("mouse")}).on(document,"touchstart",function(){E("touch")}),l.on(document,"keydown",function(){E("keyboard")});n(2),n(3),n(4),n(5);function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=l.js2dom({cl:"back",c:"&times;"}),t.appendChild(this.elem),l.on(this.elem,"click",this.onclick.bind(this))}var t,n,i;return t=e,(n=[{key:"show",value:function(){this.elem.classList.add("back_visible")}},{key:"hide",value:function(){this.elem.classList.remove("back_visible")}},{key:"onclick",value:function(){N.back()}}])&&j(t.prototype,n),i&&j(t,i),e}();function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=M(this,H(t).call(this)))._current=null,e._buffer={},e._back=new T(document.body),e.on("show",function(t,n){"main"===n.name?e._back.hide():e._back.show()}),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,v),n=t,(i=[{key:"back",value:function(){return window.history.back(),this.showByLocationHash(),this}},{key:"add",value:function(e){return Array.isArray(e)?e.forEach(function(e){this._add(e)},this):this._add(e),this}},{key:"_add",value:function(e){this._buffer[e.name]=e}},{key:"get",value:function(e){return this._buffer[e]}},{key:"has",value:function(e){return Boolean(this.get(e))}},{key:"show",value:function(e,t){var n=null,i=document.body;if(this._current){if((n=this._current.name)===e)return;this._current.hide(),this._current.elem.classList.remove("page_visible"),i.classList.remove("page_"+n)}var o=this.get(e);return o._isInited||(o.elem=l(".page_"+e),o.init&&o.init(),o._isInited=!0),i.classList.add("page_"+e),o.elem.classList.add("page_visible"),o.show(t),void 0!==o.locationHash&&window.location.hash!=="#"+o.locationHash&&(window.location.hash=o.locationHash),this._current=o,this.trigger("show",o),this}},{key:"hide",value:function(e){return this.get(e).hide(),this}},{key:"showByLocationHash",value:function(){return this.show(this.getNameByLocationHash(window.location.hash)),this}},{key:"getNameByLocationHash",value:function(e){var t;return e=(e||"").replace(/#/,""),Object.keys(this._buffer).some(function(n){var i=this._buffer[n];return i.locationHash===e&&(t=i.name,!0)},this),t||"main"}}])&&B(n.prototype,i),o&&B(n,o),t}()),z={set:function(e,t){this._buffer[e]=this._copy(t),this._save()},get:function(e,t){this._isLoaded||(this._load(),this._isLoaded=!0);var n=this._buffer[e];return void 0===n?t:n},lsName:"twintwin",_buffer:{},_load:function(){var e={};try{e=JSON.parse(localStorage.getItem(this.lsName))||{}}catch(e){console.log("Settings from localStorage: parse error.")}e.level=e.level||1,e.maxLevel=e.maxLevel||1,this._buffer=e},_save:function(){try{localStorage.setItem(this.lsName,JSON.stringify(this._buffer))}catch(e){console.log("localStorage.setItem error.")}},_copy:function(e){return JSON.parse(JSON.stringify(e))}};n(6),n(7);function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=t.elem,this.width=t.width,this.height=t.height,this.padding=t.padding,this.cols=t.cols,this.rows=t.rows,this.x=t.x||0,this.y=t.y||0,t.hidden?this.hide():this.show()}var t,n,i;return t=e,(n=[{key:"hide",value:function(){!0!==this.hidden&&(this.hidden=!0,this.elem.classList.add("field-cursor_hidden"))}},{key:"show",value:function(){!1!==this.hidden&&(this.hidden=!1,this.elem.classList.remove("field-cursor_hidden"),this.update())}},{key:"update",value:function(){this.size(this.width,this.height,this.padding)}},{key:"size",value:function(e,t,n){this.width=e,this.height=t,this.padding=n,l.size(this.elem,e,t),this.move(this.x,this.y)}},{key:"move",value:function(e,t){var n=this.x,i=this.y;e&&(n+=e),t&&(i+=t),n>this.cols-1&&(n=this.cols-1),n<0&&(n=0),i>this.rows-1&&(i=this.rows-1),i<0&&(i=0),this.x=n,this.y=i,l.move(this.elem,n*(this.width+this.padding),i*(this.height+this.padding))}},{key:"left",value:function(){this.show(),this.move(-1,0)}},{key:"right",value:function(){this.show(),this.move(1,0)}},{key:"up",value:function(){this.show(),this.move(0,-1)}},{key:"down",value:function(){this.show(),this.move(0,1)}},{key:"getXY",value:function(){return{x:this.x,y:this.y}}},{key:"reset",value:function(){this.x=0,this.y=0,!this.hidden&&this.update()}},{key:"destroy",value:function(){this.elem=null}}])&&I(t.prototype,n),i&&I(t,i),e}();n(8);var K=[{name:"",symbols:[]},{name:"Headwear",titleSymbol:"ðŸ‘’",cols:2,rows:2,symbols:["ðŸ‘‘","ðŸ‘’","ðŸŽ©","ðŸŽ“"]},{name:"Shoes",titleSymbol:"ðŸ‘ ",cols:3,rows:2,symbols:["ðŸ‘Ÿ","ðŸ‘ž","ðŸ‘¡","ðŸ‘ ","ðŸ‘¢"]},{name:"Accessories",titleSymbol:"ðŸ‘›",cols:4,rows:3,symbols:["ðŸ‘‘","ðŸ’¼","ðŸ‘œ","ðŸ‘","ðŸ‘›","ðŸ‘“","ðŸŽ€","ðŸŒ‚","ðŸ’„"]},{name:"Numerals",titleSymbol:"3",cols:4,rows:3,symbols:["1","2","3","4","5","6","7","8","9","0"]},{name:"Vegetables",titleSymbol:"ðŸ¥•",cols:4,rows:4,symbols:["ðŸ¥‘","ðŸ†","ðŸ¥”","ðŸ¥•","ðŸŒ½","ðŸŒ¶","ðŸ¥’","ðŸŒ°"]},{name:"Trains",titleSymbol:"ðŸš„",cols:4,rows:4,symbols:["ðŸš‚","ðŸšŠ","ðŸš‰","ðŸšž","ðŸš†","ðŸš„","ðŸš…","ðŸšˆ","ðŸš‡","ðŸš","ðŸš‹","ðŸšƒ"]},{name:"Drinks",titleSymbol:"ðŸ·",cols:5,rows:4,symbols:["ðŸ¼","ðŸ¥›","â˜•","ðŸµ","ðŸ¶","ðŸ¾","ðŸ·","ðŸ¸","ðŸ¹","ðŸº","ðŸ»","ðŸ¥‚"]},{name:"Fruits",titleSymbol:"ðŸ",cols:5,rows:4,symbols:["ðŸˆ","ðŸ‰","ðŸŠ","ðŸ‹","ðŸŒ","ðŸ","ðŸŽ","ðŸ","ðŸ","ðŸ‘","ðŸ’","ðŸ“","ðŸ¥"]},{name:"Flowers and trees",titleSymbol:"ðŸ’",cols:6,rows:4,symbols:["ðŸ’","ðŸŒ¸","ðŸŒ·","ðŸ€","ðŸŒ¹","ðŸŒ»","ðŸŒº","ðŸ","ðŸƒ","ðŸ‚","ðŸŒ¿","ðŸŒ¾","ðŸŒµ","ðŸŒ´","ðŸŒ²","ðŸŒ³","ðŸŒ°","ðŸŒ¼","ðŸ’®"]},{name:"Zodiac Signs",titleSymbol:"â™‹",cols:6,rows:4,symbols:["â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™Ž","â™","â™","â™‘","â™’","â™“","â›Ž"]},{name:"Sweets",titleSymbol:"â™‹",cols:6,rows:4,symbols:["ðŸ¦","ðŸ§","ðŸ¨","ðŸ©","ðŸª","ðŸŽ‚","ðŸ°","ðŸ«","ðŸ¬","ðŸ­","ðŸ®","ðŸ¯"]},{name:"Fashion",titleSymbol:"ðŸ‘—",symbols:["ðŸŽ©","ðŸ‘’","ðŸ‘¢","ðŸ‘•","ðŸ‘”","ðŸ‘š","ðŸ‘—","ðŸŽ½","ðŸ‘–","ðŸ‘˜","ðŸ‘™"]},{name:"Buildings",titleSymbol:"ðŸ¢",symbols:["ðŸ ","ðŸ¡","ðŸ«","ðŸ¢","ðŸ£","ðŸ¥","ðŸ¦","ðŸª","ðŸ©","ðŸ¨","ðŸ’’","â›ª","ðŸ¬","ðŸ¤","ðŸŒ‡","ðŸŒ†","ðŸ¯","ðŸ°","â›º","ðŸ­","ðŸ—¼","ðŸ—¾","ðŸ—»","ðŸŒ„","ðŸŒ…","ðŸŒƒ","ðŸ—½","ðŸŒ‰","ðŸŽ ","ðŸŽ¡","â›²","ðŸŽ¢"]},{name:"People",titleSymbol:"ðŸ‘¨",symbols:["ðŸ‘¦","ðŸ‘§","ðŸ‘¨","ðŸ‘©","ðŸ‘´","ðŸ‘µ","ðŸ‘¶","ðŸ‘¼","ðŸŽ…","ðŸ¤¶","ðŸ‘¸","ðŸ¤´","ðŸ‘°","ðŸ¤µ","ðŸ¤°","ðŸ‘²","ðŸ™","ðŸ’ƒ","ðŸ•º","ðŸ‘ª"]},{name:"Currency",titleSymbol:"â‚¬",bg:!1,symbols:["â‚³","à¸¿","â‚¡","â‚¢","â‚¬","Â£","â‚¤","â‚£","Æ’","â‚²","â‚­","Å","â‚¥","â‚¦","â‚½","â‚±","$","â‚®","â‚©","ï¿¦","Â¥","Â¤"]},{name:"Roman numbers",titleSymbol:"â…¨",bg:!1,symbols:["â… ","â…¡","â…¢","â…£","â…¤","â…¥","â…¦","â…§","â…¨","â…©","â…ª","â…«","â…¬","â…­","â…®","â…¯","â†€","â†","â†‚","â†‡","â†ˆ"]},{name:"Hand Signs",titleSymbol:"ðŸ‘Œ",bg:!1,symbols:["ðŸ‘","ðŸ‘Ž","ðŸ‘Œ","ðŸ‘Š","âœŠ","âœŒ","ðŸ‘‹","âœ‹","ðŸ‘","ðŸ‘†","ðŸ‘‡","ðŸ‘‰","ðŸ‘ˆ","ðŸ™Œ","ðŸ™","â˜","ðŸ‘","ðŸ’ª"]},{name:"Arrows",titleSymbol:"â†—",bg:!1,symbols:["â¬‡","â¬…","âž¡","â†—","â†–","â†˜","â†™","â†”","â†•","ðŸ”„","â—€","â–¶","ðŸ”¼","ðŸ”½","â†©","â†ª","âª","â©","â«","â¬","â¤µ","â¤´","ðŸ”€","ðŸ”ƒ","ðŸ”º","ðŸ”»","â¬†"]},{name:"Food",titleSymbol:"ðŸž",symbols:["ðŸž","ðŸ¥","ðŸ¥–","ðŸ¥ž","ðŸ§€","ðŸ–","ðŸ—","ðŸ¥“","ðŸ”","ðŸŸ","ðŸ•","ðŸŒ­","ðŸŒ®","ðŸŒ¯","ðŸ³","ðŸ²","ðŸ¥—","ðŸ¿","ðŸ±","ðŸ˜","ðŸ™","ðŸš","ðŸ›","ðŸœ","ðŸ","ðŸ ","ðŸ¢","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¡"]},{name:"Stars",titleSymbol:"âœ¯",bg:!1,symbols:["â˜…","â˜†","âœª","âœ¯","âœ¡","âœµ","â‰","â‹","âœ¹","âœ¸","âœ¶","âœ·","âœµ","âœ³","âœ²","âœ±","âœ§","âœ¦","âŸ","âŠ›","ðŸ”¯","ðŸŒ ","ðŸŒŸ","ï¹¡","âƒ","â‚","âœ»","â£","âœ­","â‰›","*","Ù­"]},{name:"Technology",titleSymbol:"ðŸ“€",symbols:["ðŸŽ¥","ðŸ“·","ðŸ“¹","ðŸ“¼","ðŸ’¿","ðŸ“€","ðŸ’½","ðŸ’¾","ðŸ’»","ðŸ“±","â˜Ž","ðŸ“ž","ðŸ“Ÿ","ðŸ“ ","ðŸ“¡","ðŸ“º","ðŸ“»"]},{name:"Sport",titleSymbol:"ðŸ€",symbols:["ðŸŽ¯","ðŸˆ","ðŸ€","âš½","âš¾","ðŸŽ¾","ðŸŽ±","ðŸ‰","ðŸŽ³","â›³","ðŸšµ","ðŸš´","ðŸ","ðŸ‡","ðŸ†","ðŸŽ¿","ðŸ‚","ðŸŠ","ðŸ„","ðŸŽ£"]},{name:"Games and Hobbies",titleSymbol:"ðŸŽ¨",symbols:["ðŸŽ¨","ðŸŽ¬","ðŸŽ¤","ðŸŽ§","ðŸŽ¼","ðŸŽµ","ðŸŽ¶","ðŸŽ¹","ðŸŽ»","ðŸŽº","ðŸŽ·","ðŸŽ¸","ðŸ‘¾","ðŸŽ®","ðŸƒ","ðŸŽ´","ðŸ€„","ðŸŽ²"]}],R={data:K,defaultRows:5,defaultCols:6,getTitle:function(e){return e.titleSymbol+" "+e.name},getLevel:function(e){return K[e]},getRandomLevel:function(){var e=Math.floor(1+Math.random()*(this.data.length-1));return this.getLevel(e)}};function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elem=l.js2dom(this.build()),this.container.appendChild(this.elem)}var t,n,i;return t=e,(n=[{key:"build",value:function(){return{cl:"info-panel",c:[{cl:"info-panel__time",t:"span",c:["Time: ",{t:"span",cl:"info-panel__time-num"}]},{cl:"info-panel__errors",t:"span",c:["Errors: ",{t:"span",cl:"info-panel__errors-num"}]}]}}},{key:"update",value:function(){var e,t,n,i;this.currentTime=Date.now(),this.updatePart("errors-num",this.errors),this.updatePart("time-num",(e=this.currentTime-this.startTime,n=Math.floor(e/1e3),(i=Math.floor(n/60))+":"+((t=n-60*i)<10?"0"+t:t)))}},{key:"updatePart",value:function(e,t){l(".info-panel__"+e,this.elem).innerHTML=t}},{key:"start",value:function(e){this.stop(),this.errors=0,this.levelTitle=R.getTitle(e),this.startTime=Date.now(),this.update(),this._timer=setInterval(this.update.bind(this),500)}},{key:"stop",value:function(){this._timer&&clearInterval(this._timer),this._timer=null}}])&&F(t.prototype,n),i&&F(t,i),e}();n(9);function G(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[n];e[n]=e[t],e[t]=i}return e}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=t.elem,this.cages=l(".field__cages",this.elem),this.padding=5,this.levelData=t.levelData,this.rows=t.rows,this.cols=t.cols,this.field=[],this.cagesCount=this.cols*this.rows,this.fieldCursor=new A({elem:l(".field-cursor",this.elem),hidden:!0,cols:this.cols,rows:this.rows,padding:this.padding}),this.infoPanel=new q(this.elem),this.setEvents(),this.setControl(t.control)}var t,n,i;return t=e,(n=[{key:"setEvents",value:function(){var e=this;this.setKeyboardEvents(),this.setMouseEvents(),this.setGamepadEvents(),l.on(window,"resize",function(){e.isHidden||e.resizeCages()})}},{key:"setControl",value:function(e){this.control=e,this.elem.dataset.control=e}},{key:"isControl",value:function(e){return"any"===this.control||this.control===e}},{key:"setMouseEvents",value:function(){var e=this;l.delegate(this.cages,".cage__front","mousedown",function(t){if(e.isControl("mouse")){e.fieldCursor.hide();var n=t.target.parentNode.dataset;e.openCage(n.x,n.y)}})}},{key:"setKeyboardEvents",value:function(){var e=this;l.on(document,"keydown",function(t){if(e.isControl("keyboard1"))switch(t.key){case"ArrowUp":e.fieldCursor.up();break;case"ArrowLeft":e.fieldCursor.left();break;case"ArrowRight":e.fieldCursor.right();break;case"ArrowDown":e.fieldCursor.down();break;case"Enter":e.openCageWithCursor()}if(e.isControl("keyboard2"))switch(t.key){case"W":e.fieldCursor.up();break;case"A":e.fieldCursor.left();break;case"D":e.fieldCursor.right();break;case"S":e.fieldCursor.down()}})}},{key:"setGamepadEvents",value:function(){var e=this;k.onbutton("left",function(){e.isControl("gamepad")&&e.fieldCursor.left()}).onbutton("right",function(){e.isControl("gamepad")&&e.fieldCursor.right()}).onbutton("up",function(){e.isControl("gamepad")&&e.fieldCursor.up()}).onbutton("down",function(){e.isControl("gamepad")&&e.fieldCursor.down()}).onbuttons(["yellow","blue","green"],function(){e.isControl("gamepad")&&e.openCageWithCursor()})}},{key:"createCages",value:function(){this.cages.innerHTML="";for(var e=0;e<this.cols;e++)for(var t=0;t<this.rows;t++){var n=l.js2dom({cl:"cage","data-x":e,"data-y":t,c:[{cl:"cage__front"},{cl:"cage__back emoji"}]});this.cages.appendChild(n)}}},{key:"resizeCages",value:function(){for(var e=this.getSize(),t=0;t<this.cols;t++)for(var n=0;n<this.rows;n++){var i=this.findCage(t,n);i&&l.css(i,{width:e.width+"px",height:e.height+"px",left:t*(e.width+this.padding)+"px",top:n*(e.height+this.padding)+"px",lineHeight:e.height+"px",fontSize:e.fontSize+"px"})}this.fieldCursor.size(e.width,e.height,this.padding)}},{key:"getLevelSymbols",value:function(){for(var e=this.levelData.symbols,t=this.cols*this.rows/2,n=[];t>n.length;)n=n.concat(e);return G((n=n.slice(0,t)).concat(n))}},{key:"getSize",value:function(){var e=Math.floor(this.cages.offsetWidth/this.cols)-this.padding,t=Math.floor(this.cages.offsetHeight/this.rows)-this.padding;return{width:e,height:t,fontSize:.7*Math.min(e,t)}}},{key:"findCage",value:function(e,t){for(var n=c(".cage",this.cages),i=0;i<n.length;i++){var o=n[i],s=o.dataset;if(String(e)===String(s.x)&&String(t)===String(s.y))return o}return null}},{key:"openCageWithCursor",value:function(){var e=this.fieldCursor.getXY();this.openCage(e.x,e.y)}},{key:"openCage",value:function(e,t){var n=this,i=this.findCage(e,t),o=this._openedCages.length,s={x:e,y:t};if(i&&!i.classList.contains("cage_opened")){switch(i.classList.add("cage_opened"),l(".cage__back",i).innerHTML=this.field[t][e],o){case 0:break;case 1:if(this.field[t][e]===this.field[this._openedCages[0].y][this._openedCages[0].x])this.removeOpenedCages(),this.removeCage(e,t);else{this.infoPanel.errors++;var r=[s].concat(this._openedCages);this._openedCages=[],setTimeout(function(){n.closeOpenedCages(r)},700)}s=null;break;case 2:this.closeOpenedCages(),this._openedCages=[]}this.infoPanel.update(),s&&this._openedCages.push(s)}}},{key:"closeOpenedCages",value:function(e){(e||this._openedCages).forEach(function(e){this.closeCage(e.x,e.y)},this)}},{key:"removeOpenedCages",value:function(){this._openedCages.forEach(function(e){this.removeCage(e.x,e.y)},this),this._openedCages=[]}},{key:"removeCage",value:function(e,t){var n=this,i=this.findCage(e,t);i&&(i.classList.add("cage_removed"),this.cagesCount--,this.infoPanel.update(),setTimeout(function(){n.cages.removeChild(i)},200),this.cagesCount||(this.infoPanel.stop(),this.onFinish()))}},{key:"closeCage",value:function(e,t){var n=this.findCage(e,t);n&&(n.classList.remove("cage_opened"),l(".cage__back",n).innerHTML="")}},{key:"initField",value:function(){var e=this.getLevelSymbols(),t=0;this.field=[];for(var n=0;n<this.rows;n++){for(var i=[],o=0;o<this.cols;o++)i.push(e[t]),t++;this.field[n]=i}}},{key:"show",value:function(e){this.field=[],this.levelData=e.levelData,this.cols=e.cols,this.rows=e.rows,this.cagesCount=this.cols*this.rows,this.initField(),this.createCages(),this.resizeCages(),this._openedCages=[],this.infoPanel.start(this.levelData),this.fieldCursor.cols=this.cols,this.fieldCursor.rows=this.rows,this.fieldCursor.reset(),this.isHidden=!1}},{key:"hide",value:function(){this.isHidden=!0,this.infoPanel.stop()}}])&&W(t.prototype,n),i&&W(t,i),e}();n(10),n(11);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,Y(t).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,v),t}(),Z={create:function(e){var t=new V;return Object.assign(t,{domEvents:[],setDomEvents:function(e){e.forEach(function(e){l.on.apply(l,e)},this),this.domEvents=this.domEvents.concat(e)},removeDomEvents:function(){this.domEvents.forEach(function(e){l.off.apply(l,e)}),this.domEvents=[]}}),Object.assign(t,e),t.init&&t.init(),t}},Q=Z.create({init:function(){var e=this;this.setDomEvents([[".game-over__restart","click",function(){e.trigger("click","restart")}],[".game-over__next","click",function(){e.trigger("click","next")}]])},updateScore:function(e){var t,n;l(".game-over__score-i").innerHTML=(t=e,n=n||"â€¯",(t=t.toString().split("").reverse().join("").replace(/(\d{3})/g,"$1"+n).split("").reverse().join(""))[0]==n?t.substr(1):t)},show:function(e){l.show(".game-over"),this.calcScore(e)},hide:function(){l.hide(".game-over")},calcScore:function(e){for(var t=this,n=Math.floor(1e6/e.errors/Math.log(e.time+3)),i=function(e){var i=Math.floor(n*e/10);setTimeout(function(){t.updateScore(i)},100*e)},o=0;o<10;o++)i(o)}}),ee={name:"game",locationHash:"game",init:function(){var e=this;this.el=l(".game");var t=this.getLevelData();this._field=new U({elem:l(".field",this.el),rows:t.rows,cols:t.cols,levelData:t.data,control:"any",infoPanel:!0}),this._onKeydown=this._onKeydown.bind(this),this._field.onFinish=function(){var e=z.get("maxLevel");z.set("maxLevel",Math.max(e,z.get("level")+1));var t=this.infoPanel;Q.show({errors:t.errors||1,time:Math.floor((Date.now()-t.startTime)/1e3)||1})},Q.on("click",function(t,n){switch(n){case"menu":N.show("main");break;case"next":e.nextLevel();break;case"restart":e.restart()}})},getLevelData:function(){var e=R.getLevel(z.get("level"));return{data:e,rows:e.rows||R.defaultRows,cols:e.cols||R.defaultCols}},_onKeydown:function(e){"Escape"===e.key&&N.back()},restart:function(){this.hide(),this.show()},nextLevel:function(){z.set("level",z.get("level")+1),this.hide(),this.show()},show:function(){var e=this.getLevelData();Q.hide(),this._field.show({levelData:e.data,cols:e.cols,rows:e.rows}),l.on(document,"keydown",this._onKeydown)},hide:function(){this._field.hide(),l.off(document,"keydown",this._onKeydown)}};n(12);function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=l(".main-bg"),this.elem.innerHTML=this.getBackground(),this.resize()}var t,n,i;return t=e,(n=[{key:"getBackground",value:function(){var e=[];return R.data.forEach(function(t){!1!==t.bg&&(e=e.concat(t.symbols))}),G(e),r(e.map(function(e){return{cl:["main-emoji","emoji"],c:e}}))}},{key:"resize",value:function(){var e=Math.floor(document.documentElement.clientWidth/12),t=this.elem.style;t.fontSize=e+"px",t.lineHeight=e+"px"}},{key:"setOpacity",value:function(e){for(var t=c(".main-emoji",this.elem),n=0;n<t.length;n++)t[n].style.opacity="function"==typeof e?e():e}},{key:"destroy",value:function(){this.elem&&(this.elem.innerHTML="",delete this.elem)}}])&&te(t.prototype,n),i&&te(t,i),e}(),ie=(n(13),n(14),l(".main-logo"));setTimeout(function(){ie.classList.add("main-logo_visible")},1e3);n(15),n(16),n(17);var oe={name:"main",locationHash:"",init:function(){this._mainBg=new ne,this.setEvents()},setEvents:function(){var e=this;l.on(window,"resize",function(){e._mainBg.resize()}).on(".main-menu__continue","click",function(){this.classList.contains("button_disabled")||N.show("select-level")}).on(".main-menu__new-game","click",function(){z.set("maxLevel",1),N.show("select-level")}).on(".main-menu__multiplayer","click",function(){N.show("multiplayer")})},show:function(){var e=this,t=l(".main-menu__continue");z.get("level")?t.classList.remove("button_disabled"):t.classList.add("button_disabled"),this._timer=setInterval(function(){e._mainBg.setOpacity(function(){return.1+.4*Math.random()})},1e3)},hide:function(){this._timer&&clearInterval(this._timer),this._timer=null,this._mainBg.setOpacity(0)}},se=(n(18),n(19),Z.create({init:function(){this.values=[];var e=["mouse","keyboard1","keyboard2","gamepad1"].map(function(e,t){var n=z.get("control"+t);return-1===this.getIndex(n)?e:n},this),t=[];this.elems=Array.from(c(".select-controls")),this.elems.forEach(function(n,i){var o=this,s=e[i];this.values.push(s),this.updateElem(i),t.push([n,"click",function(){o.selectNext(i)}])},this),this.setDomEvents(t)},getPlayerControl:function(e){return this.values[e]},selectNext:function(e){for(var t=this.getIndex(this.values[e]);-1!==this.values.indexOf(this.controls[t].value);)++t>=this.controls.length-1&&(t=0);var n=this.controls[t].value;this.values[e]=n,z.set("control"+e,n),this.trigger("change",{playerNum:e,control:n}),this.updateElem(e)},updateElem:function(e){var t=this.controls[this.getIndex(this.values[e])],n=this.elems[e];n.innerHTML=t.text,n.title=t.title},getIndex:function(e){var t=-1;return this.controls.some(function(n,i){return n.value===e&&(t=i,!0)}),t},controls:[{value:"keyboard1",text:"âŒ¨ 1",title:"Keyboard: Cursors + Enter"},{value:"keyboard2",text:"âŒ¨ 2",title:"Keyboard: W, A, D, S + Space"},{value:"mouse",text:"ðŸ–±",title:"Mouse"},{value:"touch",text:"ðŸ¤š",title:"Touch"},{value:"gamepad1",text:"ðŸŽ® 1",title:"Gamepad 1"},{value:"gamepad2",text:"ðŸŽ® 2",title:"Gamepad 2"},{value:"gamepad3",text:"ðŸŽ® 3",title:"Gamepad 3"},{value:"gamepad4",text:"ðŸŽ® 4",title:"Gamepad 4"}]}));function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ae=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.num=n.num,this.settingName="player"+n.num,this.name=this.getUserName(n.name),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.elem=l.js2dom({cl:"user-panel",c:this.name}),this.container.appendChild(this.elem),this.setEvents()}},{key:"setEvents",value:function(){l.on(this.elem,"click",this._onclick.bind(this))}},{key:"getUserName",value:function(e){return e||z.get(this.settingName,"Player "+this.num)}},{key:"_onclick",value:function(){var e=window.prompt("Player name:");e&&(this.name=this.getUserName(e),this.elem.innerHTML=this.name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),z.set(this.settingName,this.name))}}])&&re(t.prototype,n),i&&re(t,i),e}(),le={name:"multiplayer",locationHash:"multiplayer",init:function(){var e=this;this.el=l(".multiplayer"),this._levelData=R.getRandomLevel();var t=l(".field_one",this.el);this._fieldOne=new U({elem:t,cols:6,rows:5,levelData:this._levelData,control:se.getPlayerControl(0),userPanel:new ae(t,{num:1})});var n=l(".field_two",this.el);this._fieldTwo=new U({elem:n,cols:6,rows:5,levelData:this._levelData,control:se.getPlayerControl(1),userPanel:new ae(n,{num:2})}),this._onKeydown=this._onKeydown.bind(this),se.on("change",function(t,n){0===n.playerNum&&e._fieldOne.setControl(n.control),1===n.playerNum&&e._fieldTwo.setControl(n.control)})},_onKeydown:function(e){"Escape"===e.key&&this._onExit()},getLevelData:function(){var e=R.getLevel(z.get("level"));return{data:e,rows:e.rows||R.defaultRows,cols:e.cols||R.defaultCols}},show:function(){var e=this.getLevelData(),t={levelData:e.data,cols:e.cols,rows:e.rows};this._fieldOne.show(t),this._fieldTwo.show(t),l.on(document,"keydown",this._onKeydown)},hide:function(){this._fieldOne.hide(),this._fieldTwo.hide(),l.off(document,"keydown",this._onKeydown)}};n(20),n(21);function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=l(".select-level__list",this.elem),this.elem.innerHTML=this.getList(),l.delegate(this.elem,".button","click",function(){var e=parseInt(this.dataset.level,10);z.set("level",e),N.show("game")}),N.on("show",function(e,n){"select-level"===n.name&&t.update()})}var t,n,i;return t=e,(n=[{key:"getList",value:function(){var e=[],t=z.get("maxLevel");return R.data.forEach(function(n,i){n.name&&e.push({t:"li",cl:"select-level__item",c:{t:"span",cl:["button","button_red","button_middle",i<=t?"":"button_disabled"],"data-level":i,c:[{t:"span",cl:"select-level__emoji emoji",c:n.titleSymbol},n.name]}})}),r(e)}},{key:"update",value:function(){this.elem.innerHTML=this.getList();var e=z.get("maxLevel"),t=c(".select-level__list .button",this.elem),n=t[e-1]||t[t.length-1];window.scrollTo(0,l.offset(n).top-10)}}])&&ce(t.prototype,n),i&&ce(t,i),e}());var ue={name:"select-level",locationHash:"select-level",show:function(){},hide:function(){}},he=(n(22),{name:"show-levels",locationHash:"show-levels",init:function(){var e=l(".page_show-levels"),t=R.data.map(function(e,t){return t?[{t:"h4",c:[t+". "+e.name+" ",{t:"sup",c:+e.symbols.length}]},{c:e.symbols.join(" ")},{t:"br"}]:null});e.innerHTML=r(t)},show:function(){},hide:function(){}});function fe(e){return window.encodeURIComponent((e||"").substr(0,512))}N.add([ee,oe,le,ue,he]);var de={hit:function(e){var t=fe(window.location.href),n=fe(document.referrer);(new Image).src="https://mc.yandex.ru/watch/"+e+"?page-url="+t+"&page-ref="+n}};N.showByLocationHash(),window.addEventListener("hashchange",function(){N.showByLocationHash()},!1),de.hit(35250605)}]);